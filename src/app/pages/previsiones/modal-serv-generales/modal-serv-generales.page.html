<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Previsión Servicios Generales </ion-title>

  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Servicios Generales</ion-title>
    </ion-toolbar>
  </ion-header>

  <section class="flex-container boxAsc" collapse="condense">

    <form (ngSubmit)="agregarAscensor()" #formAscensor="ngForm" class="flex">

      <fieldset>
        <legend>Ascensores</legend>
        <div class="form-group">
          <ion-item>
            <div class="flex-container">
              <label for="numAsc">Núm. Ascensores</label>
              <input type="number" class="form-control ng-untouched ng-pristine ng-valid" min="0" id="numAsc" required 
                [(ngModel)]="modelAscensor.numAscensores" name="numAsc" autofocus>
              <div [hidden]="true" class="alert alert-danger">
                El número de ascensores es necesario
              </div>
            </div>
            <div>
              <label for="tipoAsc">Tipo ascensor </label>
              <ion-select id="tipoAsc" class="select form-control ng-valid ng-pristine ng-untouched"
                [(ngModel)]="modelAscensor.tipoMotorAsc" interface="popover" name="tipoAsc"
                (ionChange)="cambiaPotAscensor($event.srcElement)" required>
                <ion-select-option class="option" *ngFor="let tipoPotAsc of tipoPotAscensor"
                  [value]="tipoPotAsc">{{tipoPotAsc}}</ion-select-option>
              </ion-select>

              <input type="number" class="form-control ng-valid ng-untouched" id="potAsc" value='kW'
                [(ngModel)]="modelAscensor.potenciaMotorAsc" name="potAsc" min="0" readonly required>
              <ion-select id="medPotMotorAsc" required name="selMedPotAsc" interface="popover"
                [(ngModel)]="modelAscensor.medidaPotencia" [disabled]=true>
                <ion-select-option *ngFor="let medPot of medidorPotencia"
                  [value]="medPot">{{medPot}}</ion-select-option>
              </ion-select>


            </div>
          </ion-item>
        </div>
      </fieldset>

      <button type="submit" class="btn btn-success" [disabled]="!formAscensor.form.valid">Agregar
        Ascensor<ion-ripple-effect></ion-ripple-effect></button>
      <button type="button" class="btn btn-default btnBorrar" (click)=" formAscensor.reset()">Borrar datos</button>

      <ion-button id="click-trigger" slot="end"><ion-icon name="information"></ion-icon></ion-button>
      <ion-popover trigger="click-trigger" triggerAction="click">
        <ng-template>
          <ion-content class="ion-padding"><ion-img src="../../../../assets/Psergen.png"> </ion-img></ion-content>
        </ng-template>
      </ion-popover>
    </form>
  </section>

  <section class="flex-container boxGMotor">

    <form (ngSubmit)="agregarGrupoMotor()" #formGrupoMotor="ngForm">
      <fieldset>
        <legend>Grupo Motor</legend>

        <div class="form-group">
          <ion-item>
            <label for="numGMotor">Núm. Motores</label>
            <input type="number" min="0" class="form-control ng-untouched ng-pristine ng-valid" id="numGMotor" required
              [(ngModel)]="modelGMotor.numGMotores" name="numGMotor">
          </ion-item>
          <ion-item>
            <label for="potGMotor">Potencia Gr Motor:</label>
            <input type="number" class="form-control ng-valid ng-pristine ng-untouched" min="0" id="potGMotor"
              [(ngModel)]="modelGMotor.potenciaGMotor" name="potGMotor" required>
            <ion-select id="medPotMotorGM" class="form-control ng-valid ng-pristine ng-untouched" value="kW" required
              name="medPotMotorGM" interface="popover" (ionchange)="cambiaPotGMotor($event.srcElement)">
              <ion-select-option *ngFor="let medPotGM of medidorPotencia"
                [value]="medPotGM">{{medPotGM}}</ion-select-option>
            </ion-select>
          </ion-item>
        </div>
      </fieldset>
      <button type="submit" class="btn btn-success" [disabled]="!formGrupoMotor.form.valid">Agregar grupo motor</button>
      <button type="button" class="btn btn-default btnBorrar" (click)="formGrupoMotor.reset()">Borra
        datos</button>
    </form>
  </section>

  <div [hidden]="!submitted">

    <h2>Lista ascensores:</h2>
    
    
      <ion-grid>
        <ion-row>
          @for (ascItem of this.previsionesService.listaAscensores(); track ascItem.id) {
          <ion-col size="12" size-xs="12" size-sm="6" size-md="4" size-lg="3">
            <img alt="Icono Ascensor" src="../../../assets/icon/ascensor.png" height="50px" class="ion-float-right" />
            {{ascItem.numAscensores}} ascensores tipo {{ascItem.tipoMotorAsc}} de {{ascItem.potenciaMotorAsc}}.
            Total {{ascItem.totalpotenciakw |number}} kW.
            <div class="btn ion-button btnBorrar" (click)="this.previsionesService.eliminaAscensor(ascItem)"><ion-icon
                name="trash"></ion-icon>
            </div>
          </ion-col>
          } @empty {
          <li>No hay ningún ascensor definido.</li>
          }
        </ion-row>
      </ion-grid>


<div #listadoAsc >
      <button type="button" class="btn btn-primary" (click)="submitted=false">Resetear</button>
    </div>
  </div>
</ion-content>